(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-687db1a0"],{"72bb":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"izin-list"},[i("div",{staticClass:"card card-w-title"},[i("h1",[t._v("İzin Listesi")]),i("Button",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"Yeni Kayıt"},on:{click:function(e){return t.$router.push("izingiris")}}}),i("DataTable",{ref:"dt",staticClass:"p-datatable-responsive",attrs:{value:t.izinlistesi,filters:t.filters,selection:t.selectedIzin,selectionMode:"single",dataKey:"_id",paginator:!0,rows:10,loading:t.loading},on:{"update:selection":function(e){t.selectedIzin=e}},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v("\r\n      Kayıt Bulunamadı.\r\n  ")]},proxy:!0},{key:"loading",fn:function(){return[t._v("\r\n     Yükleniyor. Lütfen Bekleyiniz...\r\n  ")]},proxy:!0}])},[i("Column",{attrs:{field:"personelBy.isim",header:"Personel",sortable:!0,headerStyle:"width: 20em",bodyStyle:"text-align: center"},scopedSlots:t._u([{key:"body",fn:function(e){return[i("span",{staticClass:"p-column-title"},[t._v("Ad Soyad")]),t._v("\r\n          "+t._s(e.data.personelBy.isim)+" / "+t._s(e.data.personelBy.unvan)+"\r\n        ")]}},{key:"filter",fn:function(){return[i("InputText",{staticClass:"p-column-filter",attrs:{type:"text",placeholder:"Ad Soyad"},model:{value:t.filters["personelBy.isim"],callback:function(e){t.$set(t.filters,"personelBy.isim",e)},expression:"filters['personelBy.isim']"}})]},proxy:!0}])}),i("Column",{attrs:{field:"izinTipi",header:"İzin Türü",sortable:!0,filterMatchMode:"contains"},scopedSlots:t._u([{key:"body",fn:function(e){return[i("span",{staticClass:"p-column-title"},[t._v("İzin Türü")]),t._v("\r\n          "+t._s(t.getizinturadi(e.data.izinTipi))+"\r\n        ")]}}])}),i("Column",{attrs:{field:"basTarih",header:"Başlama Tarihi",sortable:!0},scopedSlots:t._u([{key:"body",fn:function(e){return[i("span",{staticClass:"p-column-title"},[t._v("Başlama Tarihi")]),i("span",[t._v(t._s(new Date(e.data.basTarih).toLocaleDateString("tr-TR",t.options)))])]}}])}),i("Column",{attrs:{field:"sonTarih",header:"Bitiş Tarihi",sortable:!0,filterMatchMode:"in"},scopedSlots:t._u([{key:"body",fn:function(e){return[i("span",{staticClass:"p-column-title"},[t._v("Bitiş Tarihi")]),i("span",[t._v(t._s(new Date(e.data.sonTarih).toLocaleDateString("tr-TR",t.options)))])]}}])}),i("Column",{attrs:{field:"izinSuresi",header:"İzin Süresi",sortable:!0,headerStyle:"width: 10em",bodyStyle:"text-align: center"}}),i("Column",{attrs:{field:"telefon",header:"Telefon",sortable:!0,filterMatchMode:"in"},scopedSlots:t._u([{key:"body",fn:function(e){return[i("span",{staticClass:"p-column-title"},[t._v("Telefon")]),t._v("\r\n          "+t._s(e.data.telefon)+"\r\n        ")]}}])}),i("Column",{attrs:{headerStyle:"width: 10em; text-align: center",bodyStyle:"text-align: center"},scopedSlots:t._u([{key:"header",fn:function(){return[i("Button",{attrs:{type:"button",icon:"pi pi-cog"}})]},proxy:!0},{key:"body",fn:function(e){return[i("Button",{staticClass:"p-button-success",staticStyle:{"margin-right":".5em"},attrs:{type:"button",icon:"pi pi-file"},on:{click:function(i){return t.downloadItem(e)}}}),i("Button",{staticClass:"p-button-warning",staticStyle:{"margin-right":".5em"},attrs:{type:"button",icon:"pi pi-pencil"},on:{click:function(i){return t.izinguncelle(e)}}}),i("Button",{directives:[{name:"confirm",rawName:"v-confirm",value:{loader:!0,ok:function(i){return t.izinsil(i,e)},message:"İzin silinecek. Emin misiniz?"},expression:"{\r\n            loader:true,\r\n            ok:dialog=> izinsil(dialog,slotProps), \r\n            message: 'İzin silinecek. Emin misiniz?'\r\n          }"}],staticClass:"p-button-danger",attrs:{type:"button",icon:"pi pi-trash"}})]}}])})],1)],1)])},s=[],o=(i("57e7"),i("7514"),i("587a")),a=(i("aeb1"),{name:"izin-list",components:{},props:[],data:function(){return{filters:{},loading:!0,izinturleri:null,izinlistesi:null,selectedIzin:null,izinServis:null,word:"",options:{weekday:"long",year:"numeric",month:"long",day:"numeric"}}},created:function(){this.izinServis=new o["a"],this.izinlistesi=[]},computed:{},mounted:function(){var t=this;this.izinServis.getizinturleri().then((function(e){t.izinturleri=e.data.data,t.izinServis.getAll().then((function(e){t.izinlistesi=e.data.data,t.loading=!1}))}))},methods:{getizinturadi:function(t){var e=this.izinturleri.find((function(e){return e.izinTipId==t}));return e?e.izinTip:"Belirsiz"},exportCSV:function(){this.$refs.dt.exportCSV()},downloadItem:function(t){var e=this;this.selectedIzin=t.data,this.izinServis.download(this.selectedIzin._id).then((function(t){console.log(t.data);var i=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),n=document.createElement("a");n.href=URL.createObjectURL(i),n.download=e.selectedIzin.personelBy.isim+"_izin.doc",n.click(),URL.revokeObjectURL(n.href)}))},belgeindir:function(t){this.selectedIzin=t.data,this.word=this.selectedIzin.personelBy.isim+" persnoeline ait izindir Başlama:"+this.selectedIzin.basTarih;var e=this,i="<html xmlns:o='urn:schemas-microsoft-com:office:office xmlns:w='urn:schemas-microsoft-com:office:word' \n      xmlns='http://www.w3.org/TR/REC-html40'>\n      <head><meta charset='utf-8'>\n      <title>Personel İzin Formu</title>\n      </head>\n      <body>".concat(e.word,"</body></html>"),n="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(i),s=document.createElement("a");document.body.appendChild(s),s.href=n,s.download=this.selectedIzin.personelBy.isim+"_izin.doc",s.click(),document.body.removeChild(s)},izinguncelle:function(t){this.selectedIzin=t.data,this.$router.push({name:"izingiris",params:{izin:this.selectedIzin}})},izinsil:function(t,e){var i=this;this.selectedIzin=e.data,this.izinServis.delete(this.selectedIzin._id).then((function(){var t=i.izinlistesi.indexOf(i.selectedIzin);i.izinlistesi.splice(t,1)})),this.selectedIzin=null,t.close()}}}),r=a,l=(i("e34e"),i("2877")),c=Object(l["a"])(r,n,s,!1,null,"94bf5764",null);e["default"]=c.exports},c015:function(t,e,i){},e34e:function(t,e,i){"use strict";var n=i("c015"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-687db1a0.bee04f2d.js.map